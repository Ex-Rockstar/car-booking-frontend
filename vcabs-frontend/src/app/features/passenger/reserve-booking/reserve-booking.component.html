<div class="min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-6 md:mb-8">
      <button (click)="goBack()" class="inline-flex items-center text-purple-600 hover:text-purple-700 mb-4">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Dashboard
      </button>
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Reserve Booking</h1>
      <p class="text-gray-600">Book your cab in advance for guaranteed availability</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
      <!-- Booking Form -->
      <div class="lg:col-span-2">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Reservation Details</h2>
          
          <!-- Trip Type Selection -->
          <div class="mb-6">
            <label class="label">Trip Type</label>
            <div class="grid grid-cols-2 gap-4">
              <button (click)="tripType = 'single'" [class]="tripType === 'single' ? 'btn-primary' : 'btn-outline'" class="text-center py-3">Single Trip</button>
              <button (click)="tripType = 'round'" [class]="tripType === 'round' ? 'btn-primary' : 'btn-outline'" class="text-center py-3">Round Trip</button>
            </div>
          </div>

          <!-- Location Details -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6">
            <div>
              <label class="label">Pickup Location</label>
              <input type="text" class="input-field" [(ngModel)]="pickupLocation.address" placeholder="Enter pickup address">
              <input type="text" class="input-field mt-2" [(ngModel)]="pickupLocation.city" placeholder="City">
              <input type="text" class="input-field mt-2" [(ngModel)]="pickupLocation.pincode" placeholder="Pincode">
            </div>
            <div>
              <label class="label">Drop Location</label>
              <input type="text" class="input-field" [(ngModel)]="dropLocation.address" placeholder="Enter drop address">
              <input type="text" class="input-field mt-2" [(ngModel)]="dropLocation.city" placeholder="City">
              <input type="text" class="input-field mt-2" [(ngModel)]="dropLocation.pincode" placeholder="Pincode">
            </div>
          </div>

          <!-- Travel Details -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6">
            <div>
              <label class="label">Travel Date</label>
              <input type="date" class="input-field" [(ngModel)]="travelDate" [min]="tomorrow">
            </div>
            <div>
              <label class="label">Travel Time</label>
              <input type="time" class="input-field" [(ngModel)]="travelTime">
            </div>
          </div>

          <div class="mb-6">
            <label class="label">Number of Passengers</label>
            <select class="input-field" [(ngModel)]="passengers">
              <option value="1">1 Passenger</option>
              <option value="2">2 Passengers</option>
              <option value="3">3 Passengers</option>
              <option value="4">4 Passengers</option>
              <option value="5">5 Passengers</option>
              <option value="6">6 Passengers</option>
              <option value="7">7 Passengers</option>
              <option value="8">8 Passengers</option>
            </select>
          </div>

          <div class="mb-6">
            <label class="label">Special Requests (Optional)</label>
            <textarea class="input-field h-24 resize-none" [(ngModel)]="specialRequests" placeholder="Any special requirements for your reservation..."></textarea>
          </div>
          <div class="sticky bottom-0 bg-white pt-4 mt-2">
            <button (click)="proceedToCabSelection()" [disabled]="!isFormValid()" class="btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed">
              Select Cab
            </button>
          </div>
        </div>
      </div>

      <!-- Cab Selection -->
      <div *ngIf="showCabSelection" class="lg:col-span-1">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Select Cab</h2>
          <div class="space-y-4">
            <div *ngFor="let cab of availableCabs" (click)="selectCab(cab)"
              [class]="selectedCab?.id === cab.id ? 'border-purple-500 bg-purple-50' : 'border-gray-200'"
              class="border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 hover:border-purple-300">
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-semibold text-gray-900">{{ cab.name }}</h3>
                <span class="text-sm font-medium text-purple-600">{{ cab.type }}</span>
              </div>
              <div class="text-sm text-gray-600 mb-3">
                <div>Base Price: ₹{{ cab.basePrice }}</div>
                <div>Per KM: ₹{{ cab.pricePerKm }}</div>
              </div>
              <div class="flex flex-wrap gap-1 mb-3">
                <span *ngFor="let feature of cab.features" class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded">
                  {{ feature }}
                </span>
              </div>
              <div class="text-lg font-bold text-purple-600">
                Total: ₹{{ calculatePrice(cab) }}
              </div>
            </div>
          </div>
          <div class="sticky bottom-0 bg-white pt-4 mt-2">
            <button (click)="proceedToConfirmation()" [disabled]="!selectedCab" class="btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed">
              Confirm Booking
            </button>
          </div>
        </div>
      </div>

      <!-- Booking Confirmation -->
      <div *ngIf="showConfirmation" class="lg:col-span-3">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Confirm Your Reservation</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Booking Summary</h3>
              <div class="space-y-3">
                <div class="flex justify-between"><span class="text-gray-600">Trip Type:</span><span class="font-medium">{{ tripType | titlecase }} Trip</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Cab Type:</span><span class="font-medium">{{ selectedCab?.type }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Passengers:</span><span class="font-medium">{{ passengers }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Travel Date:</span><span class="font-medium">{{ travelDate | date:'fullDate' }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Travel Time:</span><span class="font-medium">{{ travelTime }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Distance:</span><span class="font-medium">{{ estimatedDistance }} km</span></div>
                <div class="flex justify-between text-lg font-bold border-t pt-3"><span>Total Amount:</span><span class="text-purple-600">₹{{ calculatePrice(selectedCab!) }}</span></div>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Location Details</h3>
              <div class="space-y-4">
                <div><h4 class="font-medium text-gray-900 mb-2">Pickup Location</h4><p class="text-gray-600">{{ pickupLocation.address }}</p><p class="text-gray-600">{{ pickupLocation.city }} - {{ pickupLocation.pincode }}</p></div>
                <div><h4 class="font-medium text-gray-900 mb-2">Drop Location</h4><p class="text-gray-600">{{ dropLocation.address }}</p><p class="text-gray-600">{{ dropLocation.city }} - {{ dropLocation.pincode }}</p></div>
              </div>
            </div>
          </div>

          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <div class="flex">
              <svg class="w-5 h-5 text-yellow-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
              </svg>
              <div>
                <h4 class="text-sm font-medium text-yellow-800">Reservation Notice</h4>
                <p class="text-sm text-yellow-700 mt-1">This is an advance booking. Your cab will be confirmed 24 hours before your travel date.</p>
              </div>
            </div>
          </div>

          <div class="flex flex-col md:flex-row md:space-x-4 space-y-3 md:space-y-0 mt-6 md:mt-8">
            <button (click)="confirmBooking()" class="btn-primary md:flex-1">Confirm & Reserve</button>
            <button (click)="cancelBooking()" class="btn-outline md:flex-1">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

