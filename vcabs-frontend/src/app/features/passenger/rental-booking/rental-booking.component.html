<div class="min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-6 md:mb-8">
      <button (click)="goBack()" class="inline-flex items-center text-purple-600 hover:text-purple-700 mb-4">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Dashboard
      </button>
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Rental Booking</h1>
      <p class="text-gray-600">Rent a cab for hourly or daily use</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
      <!-- Booking Form -->
      <div class="lg:col-span-2">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Rental Details</h2>

          <!-- Rental Type -->
          <div class="mb-6">
            <label class="label">Rental Type</label>
            <div class="grid grid-cols-2 gap-4">
              <button (click)="rentalType = 'hourly'" [class]="rentalType === 'hourly' ? 'btn-primary' : 'btn-outline'" class="text-center py-3">Hourly Rental</button>
              <button (click)="rentalType = 'daily'" [class]="rentalType === 'daily' ? 'btn-primary' : 'btn-outline'" class="text-center py-3">Daily Rental</button>
            </div>
          </div>

          <!-- Location -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6">
            <div>
              <label class="label">Pickup Location</label>
              <input type="text" class="input-field" [(ngModel)]="pickupLocation.address" placeholder="Enter pickup address">
              <input type="text" class="input-field mt-2" [(ngModel)]="pickupLocation.city" placeholder="City">
              <input type="text" class="input-field mt-2" [(ngModel)]="pickupLocation.pincode" placeholder="Pincode">
            </div>
            <div>
              <label class="label">Drop Location (Optional)</label>
              <input type="text" class="input-field" [(ngModel)]="dropLocation.address" placeholder="Enter drop address">
              <input type="text" class="input-field mt-2" [(ngModel)]="dropLocation.city" placeholder="City">
              <input type="text" class="input-field mt-2" [(ngModel)]="dropLocation.pincode" placeholder="Pincode">
            </div>
          </div>

          <!-- Rental Duration -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6">
            <div>
              <label class="label">Start Date & Time</label>
              <input type="date" class="input-field mb-2" [(ngModel)]="startDate" [min]="today">
              <input type="time" class="input-field" [(ngModel)]="startTime">
            </div>
            <div>
              <label class="label">{{ rentalType === 'hourly' ? 'Duration (Hours)' : 'Duration (Days)' }}</label>
              <select class="input-field" [(ngModel)]="duration">
                <option *ngIf="rentalType === 'hourly'" value="2">2 Hours</option>
                <option *ngIf="rentalType === 'hourly'" value="4">4 Hours</option>
                <option *ngIf="rentalType === 'hourly'" value="6">6 Hours</option>
                <option *ngIf="rentalType === 'hourly'" value="8">8 Hours</option>
                <option *ngIf="rentalType === 'hourly'" value="12">12 Hours</option>
                <option *ngIf="rentalType === 'daily'" value="1">1 Day</option>
                <option *ngIf="rentalType === 'daily'" value="2">2 Days</option>
                <option *ngIf="rentalType === 'daily'" value="3">3 Days</option>
                <option *ngIf="rentalType === 'daily'" value="7">1 Week</option>
              </select>
            </div>
          </div>

          <!-- Passengers -->
          <div class="mb-6">
            <label class="label">Number of Passengers</label>
            <select class="input-field" [(ngModel)]="passengers">
              <option value="1">1 Passenger</option>
              <option value="2">2 Passengers</option>
              <option value="3">3 Passengers</option>
              <option value="4">4 Passengers</option>
              <option value="5">5 Passengers</option>
              <option value="6">6 Passengers</option>
              <option value="7">7 Passengers</option>
              <option value="8">8 Passengers</option>
            </select>
          </div>

          <!-- Special Requests -->
          <div class="mb-6">
            <label class="label">Special Requests (Optional)</label>
            <textarea class="input-field h-24 resize-none" [(ngModel)]="specialRequests" placeholder="Any special requirements for rental..."></textarea>
          </div>
          <div class="sticky bottom-0 bg-white pt-4 mt-2">
            <button (click)="proceedToCabSelection()" [disabled]="!isFormValid()" class="btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed">
              Select Cab
            </button>
          </div>
        </div>
      </div>

      <!-- Cab Selection -->
      <div *ngIf="showCabSelection" class="lg:col-span-1">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Select Cab</h2>
          <div class="space-y-4">
            <div *ngFor="let cab of availableCabs" (click)="selectCab(cab)"
              [class]="selectedCab?.id === cab.id ? 'border-purple-500 bg-purple-50' : 'border-gray-200'"
              class="border-2 rounded-lg p-4 cursor-pointer">
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-semibold text-gray-900">{{ cab.name }}</h3>
                <span class="text-sm font-medium text-purple-600">{{ cab.type }}</span>
              </div>
              <div class="text-sm text-gray-600 mb-3">
                <div *ngIf="rentalType === 'hourly'">Per Hour: ₹{{ cab.basePrice * 0.5 }}</div>
                <div *ngIf="rentalType === 'daily'">Per Day: ₹{{ cab.basePrice * 8 }}</div>
              </div>
              <div class="flex flex-wrap gap-1 mb-3">
                <span *ngFor="let feature of cab.features" class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded">{{ feature }}</span>
              </div>
              <div class="text-lg font-bold text-purple-600">Total: ₹{{ calculatePrice(cab) }}</div>
            </div>
          </div>
          <div class="sticky bottom-0 bg-white pt-4 mt-2">
            <button (click)="proceedToConfirmation()" [disabled]="!selectedCab" class="btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed">
              Confirm Booking
            </button>
          </div>
        </div>
      </div>

      <!-- Booking Confirmation -->
      <div *ngIf="showConfirmation" class="lg:col-span-3">
        <div class="card p-5 md:p-6">
          <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 md:mb-6">Confirm Your Rental Booking</h2>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Booking Summary</h3>
              <div class="space-y-3">
                <div class="flex justify-between"><span class="text-gray-600">Rental Type:</span><span class="font-medium">{{ rentalType | titlecase }} Rental</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Cab Type:</span><span class="font-medium">{{ selectedCab?.type }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Passengers:</span><span class="font-medium">{{ passengers }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Start Date:</span><span class="font-medium">{{ startDate | date:'fullDate' }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Start Time:</span><span class="font-medium">{{ startTime }}</span></div>
                <div class="flex justify-between"><span class="text-gray-600">Duration:</span><span class="font-medium">{{ duration }} {{ rentalType === 'hourly' ? 'Hours' : 'Days' }}</span></div>
                <div class="flex justify-between text-lg font-bold border-t pt-3"><span>Total Amount:</span><span class="text-purple-600">₹{{ calculatePrice(selectedCab!) }}</span></div>
              </div>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Location Details</h3>
              <div class="space-y-4">
                <div><h4 class="font-medium text-gray-900 mb-2">Pickup Location</h4><p class="text-gray-600">{{ pickupLocation.address }}</p><p class="text-gray-600">{{ pickupLocation.city }} - {{ pickupLocation.pincode }}</p></div>
                <div *ngIf="dropLocation.address"><h4 class="font-medium text-gray-900 mb-2">Drop Location</h4><p class="text-gray-600">{{ dropLocation.address }}</p><p class="text-gray-600">{{ dropLocation.city }} - {{ dropLocation.pincode }}</p></div>
              </div>
            </div>
          </div>

          <div class="flex flex-col md:flex-row md:space-x-4 space-y-3 md:space-y-0 mt-6 md:mt-8">
            <button (click)="confirmBooking()" class="btn-primary md:flex-1">Confirm & Book</button>
            <button (click)="cancelBooking()" class="btn-outline md:flex-1">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
